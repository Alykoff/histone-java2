[
  {
    "name": "global -> require - variables",
    "cases": [
      {
        "input": "START:{{require('../../tpl/function/template.tpl')}}:END",
        "expectedResult": "START:hidden:END"
      },
      {
        "input": "START:{{require('../../tpl/function/export_template.tpl')}}:END",
        "expectedResult": "START:ret10foobar:END"
      },
      {
        "input": "START:{{require('../../tpl/function/export_var.tpl')}}:END",
        "expectedResult": "START:10:END"
      },
      {
        "input": "START:{{require('../../tpl/function/export_arr.tpl')}}:END",
        "expectedResult": "START:10:END"
      },
      {
        "input": "START:{{require('../../tpl/function/export_arr.tpl') -> toJSON}}:END",
        "expectedResult": "START:{\"a\":10,\"foo\":null}:END"
      },
      {
        "input": "START:{{require('../../tpl/function/export_macro.tpl')}}:END",
        "expectedResult": "START::END"
      },
      {
        "input": "START:{{var r = require('../../tpl/function/template.tpl')}}{{r}}{{r -> isString}}:END",
        "expectedResult": "START:hiddentrue:END"
      },
      {
        "input": "START:{{var r = require('../../tpl/function/export_template.tpl')}}{{r}}{{r -> isString}}:END",
        "expectedResult": "START:ret10foobartrue:END"
      },
      {
        "input": "START:{{var r = require('../../tpl/function/export_var.tpl')}}{{r}}{{r -> isNumber}}:END",
        "expectedResult": "START:10true:END"
      },
      {
        "input": "START:{{var r = require('../../tpl/function/export_arr.tpl')}}{{r -> toJSON}}{{r.a}}{{r.foo()}}{{r -> isArray}}:END",
        "expectedResult": "START:{\"a\":10,\"foo\":null}10footrue:END"
      },
      {
        "input": "START:{{var r = require('../../tpl/function/export_macro.tpl')}}{{r()}}{{r -> isMacro}}:END",
        "expectedResult": "START:footrue:END"
      },
      {
        "input": "a {{require('../../tpl/function/DOESNT_EXISTS.tpl') -> isUndefined()}} b",
        "expectedException": {
          "line": "1",
          "message": "../../tpl/function/DOESNT_EXISTS.tpl"
        }
      },
      {
        "input": "a {{var x = require('../../tpl/function/test_for_require.tpl')}} b {{x.x}} c {{x.Z.a}} d {{x.Z.b}} e",
        "expectedException": {
          "line": "1",
          "message": "../../tpl/function/DOESNT_EXISTS.tpl"
        }
      },
      {
        "input": "{{var f = 100}}{{var mac = require('../../tpl/function/customFunction.tpl')}}{{mac.x}}",
        "expectedResult": ""
      }
    ]
  }
]