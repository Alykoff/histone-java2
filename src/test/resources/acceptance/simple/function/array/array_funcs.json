[
  {
    "name": "array methods -> length",
    "cases": [
      {
        "input": "<div>{{[1, 2, 3]->length}} = 3</div>",
        "expectedResult": "<div>3 = 3</div>"
      },
      {
        "input": "<div>{{[foo: 'bar']->length}} = 1</div>",
        "expectedResult": "<div>1 = 1</div>"
      },
      {
        "input": "<div>{{[]->length}} = 0</div>",
        "expectedResult": "<div>0 = 0</div>"
      }
    ]
  },
  {
    "name": "array - some",
    "cases": [
      {
        "input": "{{macro isBiggerThan10(element)}}{{return element > 10}}{{/macro}}{{[2, 5, 8, 1, 4]->some(isBiggerThan10)}} {{[12, 5, 8, 1, 4]->some(isBiggerThan10)}}",
        "expectedResult": "false true"
      },
      {
        "input": "{{macro isBiggerThan(biggerThan, element)}}{{return element > biggerThan}}{{/macro}}{{[2, 5, 8, 1, 4]->some(isBiggerThan, 10)}} {{[12, 5, 8, 1, 4]->some(isBiggerThan, 10)}}",
        "expectedResult": "false true"
      }
    ]
  },
  {
    "name": "array - filter",
    "cases": [
      {
        "input": "{{macro isBigEnough(element)}}{{return element >= 10}}{{/macro}}{{[12, 5, 8, 130, 44]->filter(isBigEnough)}}",
        "expectedResult": "12 130 44"
      },
      {
        "input": "{{macro isBigEnough(element)}}{{return element >= 10}}{{/macro}}{{[12, 5, 8, 130, 44]->filter(isBigEnough)}}",
        "expectedResult": "12 130 44"
      },
      {
        "input": "{{macro isBigEnough(biggerThan, element)}}{{return element >= biggerThan}}{{/macro}}{{[12, 5, 8, 130, 44]->filter(isBigEnough, 10)}}",
        "expectedResult": "12 130 44"
      }
    ]
  },
  {
    "name": "array methods -> keys",
    "cases": [
      {
        "input": "<div>{{[1, 2, 3]->keys->toJSON}} = [0,1,2]</div>",
        "expectedResult": "<div>[0,1,2] = [0,1,2]</div>"
      },
      {
        "input": "<div>{{[foo: 'bar', bar: 'foo']->keys->toJSON}} = [\"foo\",\"bar\"]</div>",
        "expectedResult": "<div>[\"foo\",\"bar\"] = [\"foo\",\"bar\"]</div>"
      },
      {
        "input": "<div>{{[bar: 'foo', foo: 'bar']->keys->toJSON}} = [\"bar\",\"foo\"]</div>",
        "expectedResult": "<div>[\"bar\",\"foo\"] = [\"bar\",\"foo\"]</div>"
      },
      {
        "input": "<div>{{[]->keys->toJSON}} = []</div>",
        "expectedResult": "<div>[] = []</div>"
      }
    ]
  },
  {
    "name": "array - map",
    "cases": [
      {
        "input": "{{macro mapper(value)}}{{return value * 100}}{{/macro}}{{[1, 4, 9]->map(mapper)}}",
        "expectedResult": "100 400 900"
      },
      {
        "input": "{{macro mapper(prefix, value)}}{{return prefix + value}}{{/macro}}{{[1, 2, 3, 4]->map(mapper, 'prefix_')}}",
        "expectedResult": "prefix_1 prefix_2 prefix_3 prefix_4"
      }
    ]
  },
  {
    "name": "array - size",
    "cases": [
      {
        "input": "{{['size': 'XL', 'color': 'gold']->values}}",
        "expectedResult": "XL gold"
      },
      {
        "input": "{{[\"size\": \"XL\", \"color\": \"gold\"]->values->toJSON}} = [\"XL\",\"gold\"]",
        "expectedResult": "[\"XL\",\"gold\"] = [\"XL\",\"gold\"]"
      },
      {
        "input": "{{['one', 'two', 'three']->reverse->toJSON}} = [\"three\",\"two\",\"one\"]",
        "expectedResult": "[\"three\",\"two\",\"one\"] = [\"three\",\"two\",\"one\"]"
      }
    ]
  },
  {
    "name": "array methods -> concat",
    "cases": [
      {
        "input": "{{[1, 2, 3] + [4, 5, 6]}}",
        "expectedResult": "1 2 3 4 5 6"
      },
      {
        "input": "{{[foo: 'bar'] + [x: 'y']}}",
        "expectedResult": "bar y"
      }
    ]
  },
  {
    "name": "array methods -> every",
    "cases": [
      {
        "input": "{{macro isBigEnough(element)}}{{return element >= 10}}{{/macro}}{{[12, 5, 8, 130, 44]->every(isBigEnough)}} {{[12, 54, 18, 130, 44]->every(isBigEnough)}}",
        "expectedResult": "false true"
      },
      {
        "input": "{{macro isBigEnough(biggerThan, element)}}{{return element >= biggerThan}}{{/macro}}{{[12, 5, 8, 130, 44]->every(isBigEnough, 10)}} {{[12, 54, 18, 130, 44]->every(isBigEnough, 10)}}",
        "expectedResult": "false true"
      }
    ]
  },
  {
    "name": "array methods -> join",
    "cases": [
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join}}",
        "expectedResult": "WindRainFire"
      },
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join('')}}",
        "expectedResult": "WindRainFire"
      },
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join(' and ')}}",
        "expectedResult": "Wind and Rain and Fire"
      },
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join(' + ')}}",
        "expectedResult": "Wind + Rain + Fire"
      },
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join(0)}}",
        "expectedResult": "Wind0Rain0Fire"
      },
      {
        "input": "{{var a = ['Wind', 'Rain', 'Fire']}}{{a->join(['*'])}}",
        "expectedResult": "Wind*Rain*Fire"
      }
    ]
  },
  {
    "name": "array methods -> chunk",
    "cases": [
      {
        "input": "{{range(7)->chunk(2)->toJSON()}}",
        "expectedResult": "[[0,1],[2,3],[4,5],[6]]"
      },
      {
        "input": "{{[[0,1],[2,3],[4,5],[6]]->toJSON}}",
        "expectedResult": "[[0,1],[2,3],[4,5],[6]]"
      },
      {
        "input": "{{range(7)->chunk(2.0)->toJSON}}",
        "expectedResult": "[[0,1],[2,3],[4,5],[6]]"
      },
      {
        "input": "{{range(6)->chunk(2)->toJSON}}",
        "expectedResult": "[[0,1],[2,3],[4,5]]"
      },
      {
        "input": "{{range(7)->chunk('2')->toJSON}}",
        "expectedResult": "[[0,1],[2,3],[4,5],[6]]"
      },
      {
        "input": "{{['sdf':'hhhh', 'dfdf', 'rrr']->chunk()->toJSON()}}",
        "expectedResult": "{\"sdf\":\"hhhh\",\"0\":\"dfdf\",\"1\":\"rrr\"}"
      },
      {
        "input": "{{['sdf':'hhhh', 'dfdf', 'rrr']->chunk('dffd')->toJSON()}}",
        "expectedResult": "{\"sdf\":\"hhhh\",\"0\":\"dfdf\",\"1\":\"rrr\"}"
      },
      {
        "input": "{{['sdf':'hhhh', 'dfdf', 'rrr']->chunk(2.5)->toJSON()}}",
        "expectedResult": "{\"sdf\":\"hhhh\",\"0\":\"dfdf\",\"1\":\"rrr\"}"
      },
      {
        "input": "{{['sdf':'hhhh', 'dfdf', 'rrr']->chunk(-1)->toJSON()}}",
        "expectedResult": "{\"sdf\":\"hhhh\",\"0\":\"dfdf\",\"1\":\"rrr\"}"
      },
      {
        "input": "{{['sdf':'hhhh', 'dfdf', 'rrr']->chunk(0)->toJSON()}}",
        "expectedResult": "{\"sdf\":\"hhhh\",\"0\":\"dfdf\",\"1\":\"rrr\"}"
      }
    ]
  },
  {
    "name": "array methods -> equals",
    "cases": [
      {
        "input": "{{[1,2] = [5, 10, 15]}}",
        "expectedResult": "true"
      }
    ]
  },
  {
    "name": "array methods -> reduce",
    "cases": [
      {
        "input": "{{macro re(prev, curr, o)}}{{prev->toNumber + curr->toNumber}}{{/macro}}{{[1,2,3]->reduce(re, 1)}}",
        "expectedResult": "7"
      },
      {
        "input": "{{macro re(prev, curr, o)}}{{prev->toNumber + curr->toNumber}}{{/macro}}{{[1,2,3]->reduce(re, 1, 1000)}}",
        "expectedResult": "3001"
      },
      {
        "input": "{{macro re(prev, curr, o)}}{{prev->toNumber + curr->toNumber}}{{/macro}}{{[1,2,3]->reduce(re)}}",
        "expectedResult": "6"
      },
      {
        "input": "{{macro re(prev, curr, o)}}{{prev->toNumber + curr->toNumber}}{{/macro}}{{[100,2,3]->reduce()}}",
        "expectedResult": "100"
      }
    ]
  },
  {
    "name": "array methods -> sort",
    "cases": [
      {
        "input": "{{macro re(prev, curr)}}{{curr}}{{/macro}}{{[1,2,3]->sort()->toJSON}}",
        "expectedResult": "[\"1\",\"2\",\"3\"]"
      },
      {
        "input": "{{macro re(prev, curr)}}{{curr}}{{/macro}}{{[1,2,3]->sort(1)->toJSON}}",
        "expectedResult": "[\"1\",\"2\",\"3\"]"
      },
      {
        "input": "{{macro re(prev, curr)}}{{curr}}{{/macro}}{{[1,2,3]->sort(re)->toJSON}}",
        "expectedResult": "[3,2,1]"
      }
    ]
  },
  {
    "name": "array methods -> sort",
    "cases": [
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 < v2}}{{/macro}}{{[4,3,2,1,22,0,-1,1]->sort(re)->toJSON}}",
        "expectedResult": "[22,4,3,2,1,1,0,-1]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 > v2}}{{/macro}}{{[4,3,2,1,22,0,-1,1]->sort(re)->toJSON}}",
        "expectedResult": "[-1,0,1,1,2,3,4,22]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{v1 < v2}}{{/macro}}{{[4,3,2,1,22,0,-1,1]->sort(re)->toJSON}}",
        "expectedResult": "[1,-1,0,22,1,2,3,4]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{v1 > v2}}{{/macro}}{{[4,3,2,1,22,0,-1,1]->sort(re)->toJSON}}",
        "expectedResult": "[1,-1,0,22,1,2,3,4]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{v1 > v2}}{{/macro}}{{[4,3,2,1,22,0,-1,1]->sort()->toJSON}}",
        "expectedResult": "[\"-1\",\"0\",\"1\",\"1\",\"2\",\"22\",\"3\",\"4\"]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 > v2}}{{/macro}}{{[0: 1,'d': 2,'w': 3, 1: -1]->sort(re)->toJSON}}",
        "expectedResult": "[-1,1,2,3]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 < v2}}{{/macro}}{{[0: 1,'d': 2,'w': 3, 1: -1]->sort(re)->toJSON}}",
        "expectedResult": "[3,2,1,-1]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 < v2}}{{/macro}}{{[0: 1,'d': 2,'w': 3, 1: -1]->sort(re, 1000000)->toJSON}}",
        "expectedResult": "[1,2,3,-1]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 < v2}}{{/macro}}{{[0: 1,'d': 2,'w': 3, 1: -1]->sort(re, 1)->toJSON}}",
        "expectedResult": "[1,-1,3,2]"
      },
      {
        "input": "{{macro re(v1,v2,k1,k2)}}{{return v1 < v2}}{{/macro}}{{[0: 1,'d': 2,'w': 3, 1: -1]->sort('dfsf')->toJSON}}",
        "expectedResult": "[\"-1\",\"1\",\"2\",\"3\"]"
      }
    ]
  },
  {
    "name": "array methods -> slice",
    "cases": [
      {
        "input": "{{[1,2,3,4]->slice(2)->toJSON}}",
        "expectedResult": "[3,4]"
      },
      {
        "input": "{{range(1,20)->slice(2,-1)->toJSON}}",
        "expectedResult": "[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]"
      },
      {
        "input": "{{range(1,20)->slice(2,1)->toJSON}}",
        "expectedResult": "[3]"
      },
      {
        "input": "{{range(1,20)->slice(2,111111)->toJSON}}",
        "expectedResult": "[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(-1,111111)->toJSON}}",
        "expectedResult": "[20]"
      },
      {
        "input": "{{range(1,20)->slice(-11,111111)->toJSON}}",
        "expectedResult": "[10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(0)->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(0)->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(0, 0)->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(2, -1)->toJSON}}",
        "expectedResult": "[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]"
      },
      {
        "input": "{{range(1,20)->slice(2, 0)->toJSON}}",
        "expectedResult": "[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice('df')->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(0,'df')->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice('df',0)->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice('df',1)->toJSON}}",
        "expectedResult": "[1]"
      },
      {
        "input": "{{range(1,20)->slice('df','df')->toJSON}}",
        "expectedResult": "[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]"
      },
      {
        "input": "{{range(1,20)->slice(-2,5)->toJSON}}",
        "expectedResult": "[19,20]"
      },
      {
        "input": "{{range(1,20)->slice(-2,5)->toJSON}}",
        "expectedResult": "[19,20]"
      },
      {
        "input": "{{range(1,20)->slice('2',5)->toJSON}}",
        "expectedResult": "[3,4,5,6,7]"
      },
      {
        "input": "{{range(1,20)->slice('2.0',5)->toJSON}}",
        "expectedResult": "[3,4,5,6,7]"
      },
      {
        "input": "IS_JS_BUG???{{range(1,20)->slice('2.12',5)->toJSON}}",
        "expectedResult": "IS_JS_BUG???[1,2,3,4,5]"
      },
      {
        "input": "{{range(1,20)->slice('255',5)->toJSON}}",
        "expectedResult": "[]"
      },
      {
        "input": "{{range(1,20)->slice(255,5)->toJSON}}",
        "expectedResult": "[]"
      }
    ]
  },
  {
    "name": "array methods -> []",
    "cases": [
      {
        "input": "{{[1,2,3,4][0]->toJSON}}",
        "expectedResult": "1"
      },
      {
        "input": "{{[0:1,2,3,4][0]->toJSON}}",
        "expectedResult": "1"
      },
      {
        "input": "{{[1,2,3,4][-1]->toJSON}}",
        "expectedResult": "null"
      },
      {
        "input": "{{[1,2,3,4][99]->toJSON}}",
        "expectedResult": "null"
      },
      {
        "input": "{{[1,2,3,4]['1']->toJSON}}",
        "expectedResult": "2"
      },
      {
        "input": "{{[0:1,2,3,4]['1']->toJSON}}",
        "expectedResult": "3"
      },
      {
        "input": "{{[0:1,2,3,4][1]->toJSON}}",
        "expectedResult": "3"
      },
      {
        "input": "{{['d':1,2,3,4][1]->toJSON}}",
        "expectedResult": "3"
      },
      {
        "input": "{{[1,2,3,4][3]->toJSON}}",
        "expectedResult": "4"
      },
      {
        "input": "{{[1,2,3,4][4]->toJSON}}",
        "expectedResult": "null"
      },
      {
        "input": "{{[][1]->toJSON}}",
        "expectedResult": "null"
      },
      {
        "input": "{{[1,2,3,4][1]->toJSON}}",
        "expectedResult": "2"
      }
    ]
  }
]

